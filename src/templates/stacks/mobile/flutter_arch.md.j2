# Flutter Project Architecture

## ðŸ—ï¸ High-Level Overview

This project is built using **Flutter (v3.22+)** and **Dart 3**.
It follows a **Clean Architecture** approach organized by **Features** (Feature-First) to ensure scalability and maintainability.

## ðŸ“‚ Directory Structure

We use the `src/` convention to encapsulate implementation details.

```text
lib/
â”œâ”€â”€ main.dart            # Entry Point
â”œâ”€â”€ main_staging.dart    # Staging Entry Point
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.dart         # Root Widget (MaterialApp)
â”‚   â”œâ”€â”€ config/          # Router, Theme, Env vars
â”‚   â”‚   â”œâ”€â”€ router.dart  # GoRouter configuration
â”‚   â”‚   â””â”€â”€ theme.dart
â”‚   â”œâ”€â”€ core/            # Shared logic across features
â”‚   â”‚   â”œâ”€â”€ api/         # Dio Client / Interceptors
â”‚   â”‚   â”œâ”€â”€ errors/      # Failure classes
â”‚   â”‚   â”œâ”€â”€ utils/       # Helpers (Validators, Formatters)
â”‚   â”‚   â””â”€â”€ widgets/     # Shared UI (Buttons, Inputs)
â”‚   â””â”€â”€ features/        # Feature Modules
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â”œâ”€â”€ data/    # Repositories & Data Sources
â”‚       â”‚   â”œâ”€â”€ domain/  # Entities & UseCases (Optional)
â”‚       â”‚   â””â”€â”€ presentation/
â”‚       â”‚       â”œâ”€â”€ controllers/ # State Management (Bloc/Riverpod)
â”‚       â”‚       â””â”€â”€ screens/     # UI Widgets
â”‚       â””â”€â”€ home/
```

## ðŸ§© Key Architectural Patterns

### 1. Feature-First Organization
Code is grouped by **what it does** (Auth, Profile, Feed), not **what it is** (Controllers, Views).
- **Rule:** A feature should be self-contained. `features/auth` contains its own data, domain, and presentation layers.

### 2. State Management
{% if libraries | default([]) | select("in", ["Bloc"]) | list | length > 0 %}
**BLoC Pattern:**
- We use `flutter_bloc`.
- **Events:** Defined as `sealed` classes (Dart 3) for exhaustive pattern matching.
- **States:** Immutable classes (using Equatable or Freezed).
- **Injection:** Provided via `MultiBlocProvider` or scoped `BlocProvider`.
{% elif libraries | default([]) | select("in", ["Riverpod"]) | list | length > 0 %}
**Riverpod (v2+):**
- We use `flutter_riverpod` with `riverpod_generator`.
- **Notifier:** Use `class MyNotifier extends _$MyNotifier` instead of `StateNotifier`.
- **Providers:** All providers are global but their state is scoped and auto-disposed.
{% elif libraries | default([]) | select("in", ["GetX"]) | list | length > 0 %}
**GetX:**
- **Controllers:** Extend `GetxController`.
- **Bindings:** Use Bindings to inject dependencies lazily.
- **Note:** Avoid using GetX for Routing if possible; prefer `GoRouter` for deep linking support.
{% else %}
**Provider/ChangeNotifier:**
- Use for simple state. Avoid for complex dependency chains.
{% endif %}

### 3. Navigation
{% if libraries | default([]) | select("in", ["GetX"]) | list | length > 0 %}
- We use **GetX Navigation** (`Get.toNamed`).
{% else %}
- We use **GoRouter** (`go_router`) for declarative routing.
- It supports deep linking, nested navigation (ShellRoute), and redirection logic (Guards).
{% endif %}

### 4. Data Layer
- **Repository Pattern:** The Presentation layer never talks to the API directly. It talks to a Repository Interface.
- **DTOs:** Data Transfer Objects (in `data/models`) parse JSON. Entities (in `domain/entities`) are used in the UI.
{% if libraries | default([]) | select("in", ["Freezed"]) | list | length > 0 %}
- **Immutability:** Use **Freezed** for generating `copyWith`, `toString`, and equality operators for Models/States.
{% endif %}

## ðŸŽ¨ Styling & Assets
- **Theme:** Defined in `src/config/theme.dart`. Use `Theme.of(context)` to access colors.
- **Assets:** Managed via `pubspec.yaml`. Prefer generating asset constants (using `flutter_gen` or similar) to avoid string typos.