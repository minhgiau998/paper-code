# Custom Templates

Extend PAPER-CODE with your organization's standards and practices.

## Overview

Custom templates allow you to:

- Match your organization's guidelines
- Add custom documentation sections
- Control output format and style
- Maintain consistency across teams

## Directory Structure

```
my-templates/
├── core/
│   ├── README.md.j2
│   ├── LICENSE.j2
│   ├── CHANGELOG.md.j2
│   ├── CONTRIBUTING.md.j2
│   ├── SECURITY.md.j2
│   ├── TESTING.md.j2
│   ├── DEPLOYMENT.md.j2
│   └── gitignore.j2
├── ai/
│   ├── AI_CONTEXT.md.j2
│   ├── AI_RULES.md.j2
│   ├── AI_WORKFLOWS.md.j2
│   ├── copilot-instructions.md.j2
│   └── cursorrules.j2
├── stacks/
│   ├── frontend/
│   │   ├── react_arch.md.j2
│   │   ├── react_standards.md.j2
│   │   └── ...
│   ├── backend/
│   └── mobile/
├── libs/
│   ├── typescript.md.j2
│   ├── tailwindcss.md.j2
│   └── ...
├── github/
│   ├── PULL_REQUEST_TEMPLATE.md.j2
│   ├── ci.yml.j2
│   └── ...
└── stacks.json  # (Optional) Stack definitions
```

## Using Custom Templates

### Command Line

```bash
paper-code init --template-dir ./my-templates
```

### In Configuration File

```json
{
  "templateDir": "./my-templates",
  "projects": [...]
}
```

## Template Variables

Each template has access to these variables:

```jinja
{{ project_name }}       # User's project name
{{ project_type }}       # frontend, backend, mobile, etc.
{{ tech_stack }}         # React, Next.js, NestJS, etc.
{{ libraries }}          # List of selected libraries
{{ description }}        # Project description
{{ year }}              # Current year
{{ author }}            # Optional author name
```

## Creating a Template

### Example: Custom README

```jinja
# {{ project_name }}

{% if description %}
{{ description }}
{% else %}
Description of {{ project_name }}.
{% endif %}

## Tech Stack

- **Framework:** {{ tech_stack }}
{% if libraries %}
- **Libraries:**
{% for lib in libraries %}
  - {{ lib }}
{% endfor %}
{% endif %}

## Company Standards

This project follows [Company Guidelines](https://example.com/guidelines).

### Code Style

- Use [Prettier](https://prettier.io/) for formatting
- Follow [ESLint](https://eslint.org/) rules
- Write tests for all features

## Getting Started

[Your custom getting started section]
```

### Variables & Conditionals

```jinja
{# Check if specific library is included #}
{% if "TypeScript" in libraries %}
## TypeScript Configuration

This project uses TypeScript for type safety.
{% endif %}

{# Check project type #}
{% if project_type == "frontend" %}
## Browser Support

This project supports modern browsers.
{% elif project_type == "backend" %}
## Node.js Version

Requires Node.js 18+
{% endif %}

{# Loop through libraries #}
{% for lib in libraries %}
- {{ lib }}
{% endfor %}
```

### Reusable Blocks

Create template includes:

```jinja
{# templates/core/_footer.j2 #}
---

Generated by PAPER-CODE {{ version }}
```

Include in other templates:

```jinja
{# templates/core/README.md.j2 #}
...content...

{% include 'core/_footer.j2' %}
```

## Adding Custom Stacks

Create a `stacks.json` to define new stacks:

```json
{
  "customStacks": [
    {
      "name": "Remix",
      "category": "frontend",
      "description": "Full-stack web framework",
      "templates": ["remix_arch.md.j2", "remix_standards.md.j2"]
    }
  ]
}
```

## Example: Corporate Template Package

### Setup

```bash
mkdir corporate-templates
cd corporate-templates
```

### core/README.md.j2

```jinja
# {{ project_name }}

> Part of ACME Corp technology portfolio

{{ description }}

## Quick Start

See [GETTING_STARTED.md](./GETTING_STARTED.md).

## ACME Standards

All projects must follow [ACME Tech Standards](https://internal.acme.com/standards):

1. **Code Quality:** ACME-grade quality assurance
2. **Security:** OWASP Top 10 compliance required
3. **Performance:** Sub-100ms response times
4. **Documentation:** All features must be documented

## Support

Contact: tech-support@acme.com
```

### ai/AI_RULES.md.j2

```jinja
# AI Assistant Rules for {{ project_name }}

## ACME Policies

{% if "TypeScript" in libraries %}
- Use TypeScript - no JavaScript
- Strict mode enabled
- All functions must have explicit types
{% endif %}

{% if "React" in tech_stack %}
- Use functional components only
- Use React Hooks for state
- No class components
- Use TailwindCSS for styling
{% endif %}

## Security

- Never commit secrets
- Use environment variables for config
- Validate all user input
- Sanitize HTML output

## Performance

- Minimize bundle size
- Use code splitting
- Cache at CDN level
- Monitor Core Web Vitals
```

### stacks/frontend/react_arch.md.j2

```jinja
# {{ project_name }} - Architecture

Built with React for ACME standards compliance.

## ACME Approved Architecture

```

App (Root)
├── Layouts
│ ├── MainLayout
│ └── DashboardLayout
├── Features
│ ├── Auth
│ ├── Dashboard
│ └── Reports
├── Components
│ ├── UI (shared)
│ └── Forms (shared)
└── Services
├── API
└── Analytics

```

## Approved Libraries

| Category | Library | ACME Approved |
|----------|---------|---------------|
| State | Zustand | ✅ |
| State | Redux | ✅ |
| UI | TailwindCSS | ✅ |
| Forms | React Hook Form | ✅ |
| API | TanStack Query | ✅ |

See [APPROVED_LIBRARIES.md](https://internal.acme.com/libraries).
```

## Distribution

### Package as NPM Package

```json
{
  "name": "@acme/paper-code-templates",
  "version": "1.0.0",
  "files": ["templates/**/*"],
  "main": "templates"
}
```

Publish and share:

```bash
npm publish
```

Use in projects:

```bash
npm install @acme/paper-code-templates
paper-code init --template-dir ./node_modules/@acme/paper-code-templates
```

### Share via Git

```bash
paper-code init --template-dir https://github.com/acme/paper-code-templates.git
```

## Testing Templates

Create test files:

```bash
# tests/templates.test.ts
import { DocGenerator } from 'paper-code';

describe('Custom Templates', () => {
  it('renders React architecture', async () => {
    const generator = new DocGenerator('./corporate-templates');
    const result = await generator.render({
      project_name: 'Test Project',
      project_type: 'frontend',
      tech_stack: 'React',
      libraries: []
    });

    expect(result.ARCHITECTURE).toContain('ACME');
  });
});
```

## Best Practices

1. **Follow Naming Convention:** Use `.j2` extension
2. **Document Variables:** Add comments about available variables
3. **Provide Examples:** Include example outputs
4. **Version Your Templates:** Use semantic versioning
5. **Test Rendering:** Verify all templates render correctly
6. **Maintain Consistency:** Keep style consistent across templates

## Troubleshooting

### Template not found

```bash
# Verify directory structure
ls -R ./my-templates

# Check file permissions
chmod +r ./my-templates/**/*.j2
```

### Jinja2 Syntax Error

```bash
# Validate template syntax
python -m jinja2 -e templates/ --strict
```

### Variables not rendering

```jinja
{# Check variable names are lowercase #}
{{ project_name }}     ✅
{{ projectName }}      ❌

{# Use lowercase attribute names #}
{{ libraries|length }} ✅
{{ Libraries|length }} ❌
```

## Example: Starter Template

[Download starter template](https://github.com/minhgiau998/paper-code/tree/main/src/templates)

---

For more information, see the [CLI Usage](./cli-usage.md) guide.
